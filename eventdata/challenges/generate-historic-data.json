{% set p_bulk_indexing_clients = (bulk_indexing_clients | default(8)) %}

{
  "name": "generate-historic-data",
  "description": "Example of how to index 5 days worth of data at 6x speed (20 hours). IDs are autogenerated by Elasticsearch, meaning there are no conflicts.",
  "meta": {
    "client_count": {{ p_bulk_indexing_clients }},
    "benchmark_type": "generate-historic-data"
  },
  "schedule": [
    {
      "name": "delete-index-elasticlogs-h-*",
      "operation": {
        "operation-type": "delete-index",
        "index": "elasticlogs-h*"
      }
    },
    {
      "operation": "delete-index-template"
    },
    {
      "operation": {
        "operation-type": "create-index-template",
        "settings": {
          "index.refresh_interval": "10s",
          "index.number_of_shards": {{ shard_count | default(4) }}
        }
      }
    },
    {
      "operation": "index_6x_speed",
      "target-throughput": 19,
      "warmup-time-period": 0,
      "time-period": 72000,
      "clients": {{ p_bulk_indexing_clients }}
    }
  ]
}
